# B-0110 â€” Trading Core WAL v1 (durable-before-publish)

## Goal
Add WAL segments with checksums and define the commit line for 'Executed'.

## Scope
- Segment format (header + records + CRC)
- Append + fsync policy
- Record includes command + resulting events (+seq)
- Outbox pointer for publish

## Acceptance Criteria
- Any externally published TradeExecuted must exist in WAL
- WAL corruption is detected and causes HALT
- Segment rotation policy exists

## Tests
- Kill -9 recovery test
- Corruption injection test
- Throughput benchmark with group commit

## Observability
- Metrics: wal_append_p99, wal_fsync_p99, wal_corruption_detected_total
- Logs: segment rotation events

## Rollback / Recovery
- If WAL change causes instability, switch to STRICT fsync and rollback to stable version

## Dependencies
- B-0103
