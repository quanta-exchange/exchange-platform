# B-0303 — Reserve model v1 (available vs hold accounts)

## Goal
Represent order reserves as accounting operations and keep invariant available+hold=total.

## Scope
- Account model includes available and hold subaccounts per user/currency
- On OrderAccepted: move available→hold (or pre-reserve policy)
- On Cancel: hold→available
- On Fill: decrease hold and apply trade postings

## Acceptance Criteria
- Overspend impossible via reserve invariant
- Partial fill updates hold correctly
- Cancel after partial fill returns remaining hold

## Tests
- Golden tests: accept/cancel/partial fill sequences
- Invariant checks across random scenarios

## Observability
- Metrics: reserved_total, available_total, invariant_violation_total

## Rollback / Recovery
- If reserve logic wrong, disable new order acceptance (CANCEL_ONLY) until fixed; replay corrections via reversal entries

## Dependencies
- B-0302
- B-0104
