# I-0004 — CI: path-based build/test + security baseline

## Goal
Reduce CI cost and ensure core checks are always enforced.

## Scope
- GitHub Actions workflows:
  - contracts change → full test
  - service change → only that service
  - infra change → helm/kustomize lint (later)
- Add secret scanning and dependency audit

## Acceptance Criteria
- CI runs on PR and main
- contracts changes trigger buf gate + all tests
- Reports are uploaded as artifacts

## Tests
- Validate with sample PRs touching each path
- Failing lint/test blocks merge

## Observability
- CI duration metrics (optional)
- Alerts for repeated failures

## Rollback / Recovery
- Revert to simple CI if path rules are incorrect (documented)

## Dependencies
- B-0002
