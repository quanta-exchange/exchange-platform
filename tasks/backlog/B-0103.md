# B-0103 â€” Matching rules v1 (LIMIT/MARKET + liquidity policy)

## Goal
Define and implement matching semantics for Limit/Market orders and liquidity exhaustion.

## Scope
- Limit cross and rest
- Market sweep multiple levels
- Define policy for insufficient liquidity (partial allowed, remainder rejected/canceled)
- Optional: POST_ONLY (if in scope)

## Acceptance Criteria
- Deterministic fills and event ordering
- Market order behavior is documented and tested
- Rejections carry reason code

## Tests
- Golden tests: market sweep, insufficient liquidity
- Race tests: cancel-vs-fill ordering

## Observability
- Metrics: reject_reason_total{code}
- Traces: trade produced spans

## Rollback / Recovery
- Roll back to previous stable ruleset if policy change causes divergence

## Dependencies
- B-0102
