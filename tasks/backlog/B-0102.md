# B-0102 â€” Orderbook data structures v1 (correctness-first)

## Goal
Implement price-time priority orderbook with efficient cancel and partial fills.

## Scope
- Price ladder + level FIFO queues
- Order state machine (ACCEPTED/PARTIAL/FILLED/CANCELED/REJECTED)
- Cancel by order_id

## Acceptance Criteria
- FIFO within same price level
- Best-price priority across levels
- Partial fill updates remaining_qty
- Cancel removes order and prevents future matches

## Tests
- Golden tests: FIFO, partial fill, cancel, cross-level
- Property tests: no negative qty, no duplicate fill

## Observability
- Metrics: book_levels, open_orders, match_loop_latency_ms

## Rollback / Recovery
- If regression found, revert matching logic changes and re-run golden suite

## Dependencies
- B-0101
